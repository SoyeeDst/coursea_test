	<!doctype html>

	<html>
	<head>
	   <meta charset="utf-8">
	   <title>Ajax</title>
	   <script type="text/javascript">
        function ajax(method, url, data) {
             var request = new XMLHttpRequest();
             return new Promise(function (resolve, reject) {
                  request.onreadystatechange = function () {
                      if (request.readyState === 4) {
                        if (request.status === 200) {
                           resolve(request.responseText);
                        } else {
                           reject(request.status);
                        }
                    }
                 };
             request.open(method, url);
             request.send(data);
        });
     }

     var log = document.getElementById('test-promise-ajax-result');
     var p = ajax('GET', 'http://www.liaoxuefeng.com/api/categories');
     p.then(function (text) { 
         log.innerText = text;
     }).catch(function (status) { 
         log.innerText = 'ERROR: ' + status;
     });

	   </script>
	</head>
	  
	<body>
	<h1>Ajax</h1>
     <div id="test-promise-ajax-result">
     </div>
	</body>
	</html>